@model GameStore.Web.Models.CompositeOrdersViewModel

@{
	ViewBag.Title = "All Orders";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>All Orders</h1>
<hr />
@using (Html.BeginForm("ShowAll", "Orders", FormMethod.Post))
{
	<b>@Html.LabelFor(m => m.Filter.From)</b>
	<p>
		@Html.EditorFor(m => m.Filter.From, new { @class = "form-control" })
		@Html.ValidationMessageFor(m => m.Filter.From)
	</p>
	<b>@Html.LabelFor(m => m.Filter.To)</b>
	<p>
		@Html.EditorFor(m => m.Filter.To, new { @class = "form-control" })
		@Html.ValidationMessageFor(m => m.Filter.To)
	</p>

	<p><button type="submit" class="btn btn-primary">Filter Orders</button></p>
}

@if (Model.Orders.Count > 0)
{
	foreach (var order in Model.Orders)
	{
		<b>@Html.LabelFor(m => order.DateOrdered)</b>
		<p>@Html.DisplayFor(m => order.DateOrdered)</p>
		<h3>Order details</h3>

		foreach (var detail in order.OrderDetails)
		{
			<b>@Html.LabelFor(m => detail.Game.Name)</b>
			<p>
				@Html.DisplayFor(m => detail.Game.Name)
			</p>
			<b>@Html.LabelFor(m => detail.Price)</b>
			<p>
				@Html.DisplayFor(m => detail.Price)
			</p>
			<b>@Html.LabelFor(m => detail.Quantity)</b>
			<p>
				@Html.DisplayFor(m => detail.Quantity)
			</p>
			<hr />
		}
	}

	<hr />
}